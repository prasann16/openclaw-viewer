## Task: init
- Initialized Next.js 16 project with TypeScript, Tailwind CSS v4, App Router
- Initialized shadcn/ui with default settings
- Added shadcn components: button, scroll-area, collapsible, sheet
- Verified build passes successfully
- Files created: standard Next.js scaffold + components/ui/{button,scroll-area,collapsible,sheet}.tsx, lib/utils.ts

## Task: env-setup
- Created .env.local with CLAWD_ROOT=/home/clawdbot/clawd
- Created lib/files.ts with getFileTree() and readFileContent() helpers
- getFileTree() recursively walks directories, filters to .md files, skips hidden dirs, sorts folders first
- readFileContent() validates path is within CLAWD_ROOT (traversal protection) and reads file content
- Files changed: .env.local (new), lib/files.ts (new)

## Task: api-files
- Created app/api/files/route.ts with GET handler
- Calls getFileTree() and returns JSON { tree: [...] }
- Includes error handling with 500 response
- Files changed: app/api/files/route.ts (new)

## Task: api-file
- Created app/api/file/route.ts with GET handler
- Reads 'path' from searchParams, delegates to readFileContent()
- Returns 400 for missing path, 403 for traversal attempts, 404 for not found, 500 for other errors
- Files changed: app/api/file/route.ts (new)

## Task: layout
- Updated app/layout.tsx with class="dark" on html element
- Switched to Inter font for body and JetBrains Mono for code
- Updated metadata to "Clawd Viewer"
- Dark mode background uses shadcn CSS variables (bg-background in dark mode)
- Flex layout shell will be in page.tsx (sidebar + main content)
- Files changed: app/layout.tsx (modified)

## Task: file-tree
- Created components/file-tree.tsx with recursive FileTree and FileTreeNode components
- Uses Collapsible for folders with chevron rotation animation
- Uses lucide-react icons (ChevronRight, File, Folder)
- Highlights selected file with bg-accent
- Depth-based indentation for nested items
- Sorting handled by getFileTree() in lib/files.ts (folders first, alpha)
- Files changed: components/file-tree.tsx (new)

## Task: markdown-viewer
- Installed react-markdown, remark-gfm, rehype-highlight, @tailwindcss/typography
- Added @tailwindcss/typography plugin to globals.css
- Created components/markdown-viewer.tsx using ReactMarkdown with remark-gfm and rehype-highlight
- Uses prose-invert for dark mode, github-dark highlight.js theme
- Files changed: components/markdown-viewer.tsx (new), app/globals.css (modified), package.json (modified)

## Task: sidebar
- Created components/sidebar.tsx wrapper component
- Fetches /api/files on mount, stores tree in state
- Renders "Clawd" header with border, FileTree in ScrollArea
- Handles error and empty states
- Accepts selectedPath and onSelect props from parent
- Files changed: components/sidebar.tsx (new)

## Task: main-page
- Rewrote app/page.tsx as client component with sidebar + viewer layout
- Flex layout: sidebar (w-64, hidden on mobile) + main content area (flex-1, overflow-auto)
- Selected file path stored in URL query param (?file=...) for refresh persistence
- Fetches file content from /api/file when selection changes
- Shows "Select a file" placeholder with FileText icon when nothing selected
- Error state displayed when file fetch fails
- Wrapped in Suspense for useSearchParams compatibility
- Files changed: app/page.tsx (rewritten)
