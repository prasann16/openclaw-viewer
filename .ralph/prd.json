[
  {"id": "init", "description": "Initialize Next.js 14 project with TypeScript and Tailwind CSS using App Router. Run: npx create-next-app@latest . --typescript --tailwind --app --src-dir=false --import-alias='@/*'. Then install shadcn/ui: npx shadcn@latest init -d. Add these shadcn components: button, scroll-area, collapsible, sheet.", "passes": true},
  {"id": "env-setup", "description": "Create .env.local with CLAWD_ROOT=/home/clawdbot/clawd. Create lib/files.ts with helper functions: getFileTree(dir) returns recursive tree structure, readFileContent(path) reads file with path traversal protection (must be within CLAWD_ROOT).", "passes": true},
  {"id": "api-files", "description": "Create app/api/files/route.ts - GET handler that calls getFileTree() and returns JSON tree of all .md files in CLAWD_ROOT. Include name, path (relative), type (file/folder), and children for folders.", "passes": true},
  {"id": "api-file", "description": "Create app/api/file/route.ts - GET handler that reads 'path' from searchParams, validates it's within CLAWD_ROOT, calls readFileContent(), returns {content, path}. Return 400 if path missing, 403 if path traversal attempt, 404 if not found.", "passes": true},
  {"id": "layout", "description": "Create app/layout.tsx with dark mode (class='dark' on html), Inter font, proper metadata. Create a flex layout shell: sidebar (w-64, border-r, fixed height) + main content area (flex-1, overflow-auto). Use zinc-950 background.", "passes": true},
  {"id": "file-tree", "description": "Create components/file-tree.tsx - recursive tree component. Props: tree data, selectedPath, onSelect callback. Use Collapsible for folders, show folder/file icons (can use unicode or lucide-react icons). Highlight selected file. Sorted: folders first, then files alphabetically.", "passes": true},
  {"id": "markdown-viewer", "description": "Create components/markdown-viewer.tsx using react-markdown with remark-gfm plugin. Install: npm i react-markdown remark-gfm. Apply Tailwind prose classes (prose-invert for dark mode). Add syntax highlighting for code blocks using rehype-highlight (npm i rehype-highlight).", "passes": true},
  {"id": "sidebar", "description": "Create components/sidebar.tsx - wrapper that fetches /api/files on mount, renders FileTree, handles file selection. Include a header with 'Clawd' title. Use ScrollArea from shadcn for the tree container.", "passes": true},
  {"id": "main-page", "description": "Create app/page.tsx - client component that manages selected file state. Renders Sidebar (passes onSelect), and MarkdownViewer (fetches /api/file when selection changes). Show 'Select a file' placeholder when nothing selected. Store selected path in URL query param for refresh persistence.", "passes": false},
  {"id": "polish", "description": "Add loading states (skeleton or spinner) while fetching files/content. Add error handling with user-friendly messages. Ensure mobile responsive: on small screens, sidebar should be a Sheet (slideover) with a hamburger toggle. Test the full flow works end-to-end.", "passes": false}
]
